---
title: "主机资源使用情况"
slug: "主机资源使用情况"
date: "2024-04-13"
created: "2024-04-13"
tags: ["主机"]
---
### 查看主机信息

```
top - 00:42:02 up 29 min,  3 users,  load average: 43.44, 41.51, 28.34
Tasks: 150 total,   1 running, 149 sleeping,   0 stopped,   0 zombie
%Cpu(s): 14.4 us, 11.3 sy,  0.0 ni, 34.7 id, 39.1 wa,  0.0 hi,  0.5 si,  0.0 st
KiB Mem :  2046504 total,   262672 free,  1394836 used,   388996 buff/cache
KiB Swap:        0 total,        0 free,        0 used.   487196 avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND                                                                                 
21190 root      20   0   41248  28136   5508 D   9.6  1.4   0:00.29 python                                                                                  
 3963 root      20   0 2653352  52504   6688 S   3.7  2.6   2:17.81 dockerd                                                                                 
 3194 root      20   0 1023556  39616   3176 S   3.3  1.9   0:48.33 YDService                                                                               
 3970 root      20   0 1267608  20012   4692 S   2.3  1.0   0:07.40 containerd                                                                              
20424 root      20   0  748208  13176   2148 S   1.0  0.6   0:00.41 barad_agent                                                                             
21149 root      20   0    7092   1788   1496 S   1.0  0.1   0:00.03 entrypoint.sh                                                                           
    1 root      20   0  125628   3648   2156 S   0.7  0.2   0:03.19 systemd 
```



### 系统运行状态概览

- **top - 00:42:02** 表示`top`命令的运行时间，即这个`top`窗口已经运行了42秒2毫秒。
- **up 29 min** 表示系统已经运行了29分钟。
- **3 users** 当前有3个用户登录。
- **load average: 43.44, 41.51, 28.34** 系统负载平均值，分别对应过去1分钟、5分钟和15分钟的平均负载。数值较高（一般超过CPU核心数）表明系统可能比较忙碌或存在性能瓶颈。

### CPU使用情况
- **%Cpu(s): 14.4 us, 11.3 sy, 0.0 ni, 34.7 id, 39.1 wa, 0.0 hi, 0.5 si, 0.0 st**
  - **us**: 用户CPU时间百分比，即运行非内核态程序的时间。
  - **sy**: 系统CPU时间百分比，即运行内核态程序的时间。
  - **ni**: 用户态改变过优先级的进程所占CPU时间比例。
  - **id**: 空闲CPU时间百分比。
  - **wa**: 等待I/O完成的CPU时间百分比，高值表明磁盘I/O可能存在瓶颈。
  - **hi**: 硬中断时间百分比。
  - **si**: 软中断时间百分比。
  - **st**: 虚拟CPU被hypervisor偷走的时间百分比（对于虚拟机而言）。

### 内存使用情况
- **KiB Mem**: 总内存大小为2046504 KiB (约2GB)。
  - **free**: 空闲内存。
  - **used**: 已使用内存。
  - **buff/cache**: 缓冲区和缓存占用的内存，这部分内存可以快速释放给需要的应用程序使用。
- **KiB Swap**: 本例中没有配置交换分区，因此swap总大小和使用量均为0。

### 各进程信息
- **PID**: 进程ID。
- **USER**: 运行进程的用户。
- **PR**: 优先级。
- **NI**: nice值，影响进程调度优先级。
- **VIRT**: 进程虚拟内存大小。
- **RES**: 进程占用的物理内存大小。
- **SHR**: 进程使用的共享内存大小。
- **S**: 进程状态，如D（不可中断睡眠，通常在I/O等待）、R（运行）、S（休眠）等。
- **%CPU, %MEM**: 进程占用CPU和内存的百分比。
- **TIME+:** 进程累计CPU时间。
- **COMMAND**: 进程的命令名或路径。

从进程列表看，`python`进程（PID 21190）消耗了较高的CPU（9.6%），可能是一个CPU密集型任务。`dockerd`（PID 3963）和`YDService`（PID 3194）也占用了较多资源，分别消耗了2.6%和1.9%的内存。系统整体较高的负载平均值（尤其是1分钟内的43.44）和较高的`wa`值（39.1%）表明可能存在I/O等待问题，影响了系统性能。